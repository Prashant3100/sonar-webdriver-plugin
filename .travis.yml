language: java
install: true

script:
- git config --local user.name "Travis CI"
- git config --local user.email "builds@travis-ci.com"
- git checkout -f master
- mvn -B release:prepare -DskipTests=true -DscmCommentPrefix="[ci skip][maven-release-plugin]" -Dusername=${GITHUB_USERNAME} -Dpassword=${GITHUB_TOKEN}
before_deploy:
- export TAG=$(git describe --tags --abbrev=0)
deploy:
  skip_cleanup: true
  provider: releases
  api_key:
    secure: P0lRbq1nE3kXiOflcyQswPT7FZwT0tQIl7VCzP4uyewic0z9T4MZJJ52LCZ8sayTgojyUfkVGzLp0bFAIkFwAyPTvFqMT4evzhRwbv6Hmn5pM+wXam0y6ml+mvdYrKcw78HZRQleLvFGORhhjK+jbFFgGpxo4OaCj6D/MN4CmFdyh5nAV2P76IZdigehoJcsyQIa3URz6AUbCPe5ZswbqyKPDC3u9E4eYqz1AnKII+K0GCFatKPepFAC87mHm6TjEtliARKcc/LOLH3Ab0h9I005M16tjChz5uws4CEMTsGF7WrkodFtjyxE0qW2b+CM14laNqrBtXwphECTH56rhjDjYlC8EoyxrNDS7N+RQFrRXnkrA+OHVykUhjdoJl4m75w460V7pdstkMeRr8DeWMvkVqqKwFuI65n++1PDU4lgFqPlhYmH13EBaFJatfA5oPOg5BXY+LtX0SLGBp3+ZanOVGr8caa0TC0Jjezb0Ru/SceKdGK+tfyT2dSC8d8pUZeNdg8L3cFuDm71FngFXXH0gsGIl+e3CjhU8P2igrxiJtwAyX/BXYY7zQuAyaX36jNy0ko1GucD0labO2uqxQqJ+LjZNIUM+4pMJBc2da/qJ3q1iz47tO1Ht+5dggUBEeowgxhpYle+biDxz5B2vnbgv1NqC2Wv/2zfla26jwI=
  tag_name: $TAG
  file: target/$TAG.jar
  on:
    repo: kwoding/sonar-webdriver-plugin
  name: $TAG
branches:
  only:
  - master
